    <!-- Profile Section -->
    <section id="profile-section" style="display:none;">
      <h2>My Profile</h2>
      <div id="profile-info"></div>
    </section>
    <!-- Classes Section -->
    <section id="classes-section" style="display:none;">
      <h2>My Classes</h2>
      <table class="table" aria-label="Classes" id="classes-table">
        <thead><tr><th>Class</th><th>Actions</th></tr></thead>
        <tbody>
          <!-- Classes will be loaded dynamically -->
        </tbody>
      </table>
    </section>
    <!-- Create Quiz Section -->
    <section id="create-quiz-section" style="display:none;">
      <h2>Create Quiz</h2>
      <form id="create-quiz-form">
        <label>Quiz Title</label>
        <input type="text" name="title" required placeholder="Enter quiz title">
        <label>Class</label>
        <select name="class" id="quiz-class-select"></select>
        <label>Subject</label>
        <select name="subject" id="quiz-subject-select"></select>
        <label>Quiz Content</label>
        <textarea name="content" rows="6" required placeholder="Enter quiz questions and instructions"></textarea>
        <button type="submit" class="btn">Create Quiz</button>
      </form>
    </section>
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Teacher Dashboard - RUDASUMBWA</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --navy: #1a1f36;
      --white: #fff;
      --gold: #ffd700;
      --shadow: 0 2px 16px rgba(26,31,54,0.08);
      --radius: 16px;
      --transition: 0.2s;
    }
    body {
      background: var(--navy);
      font-family: 'Inter', sans-serif;
      color: var(--white);
      margin: 0;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }
    header {
      display: none;
    }
    nav[aria-label="Sidebar"] {
      position: fixed;
      left: 0; top: 0; bottom: 0;
      width: 260px;
      background: var(--navy);
      color: var(--white);
      box-shadow: 2px 0 24px rgba(26,31,54,0.12);
      z-index: 100;
      display: flex;
      flex-direction: column;
      padding-top: 32px;
      transition: left var(--transition);
    }
    .logo {
      text-align: center;
      font-size: 1.7rem;
      font-weight: 700;
      color: var(--gold);
      margin-bottom: 32px;
      letter-spacing: 2px;
    }
    .sidebar-list {
      display: flex;
      flex-direction: column;
      gap: 8px;
      padding: 0;
      margin: 0;
      list-style: none;
    }
    .sidebar-list li {
      width: 100%;
    }
    .sidebar-list a {
      color: var(--white);
      text-decoration: none;
      padding: 13px 32px;
      border-radius: var(--radius);
      font-weight: 600;
      font-size: 1.05rem;
      transition: background var(--transition), color var(--transition);
      display: flex;
      align-items: center;
      gap: 10px;
      outline: none;
    }
    .sidebar-list a.active, .sidebar-list a:focus, .sidebar-list a:hover {
      background: rgba(255,215,0,0.12);
      color: var(--gold);
    }
    .sidebar-toggle {
      display: none;
      position: absolute;
      top: 18px; right: -38px;
      background: var(--gold);
      color: var(--navy);
      border-radius: 50%;
      width: 38px; height: 38px;
      align-items: center;
      justify-content: center;
      font-size: 1.5rem;
      cursor: pointer;
      z-index: 101;
      border: none;
    }
    main {
      margin-left: 260px;
      padding: 32px 24px 24px 24px;
      min-height: 100vh;
      background: var(--white);
      color: var(--navy);
      transition: margin-left var(--transition);
      flex: 1;
      transition: margin-left var(--transition);
      flex: 1;
    }
    header[aria-label="Topbar"] {
      display: flex;
      align-items: center;
      justify-content: space-between;
      background: var(--white);
      color: var(--navy);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 18px 32px;
      margin-bottom: 32px;
    }
    .welcome {
      font-size: 1.3rem;
      font-weight: 700;
      color: var(--navy);
    }
    .profile {
      display: flex;
      align-items: center;
      gap: 18px;
    }
    .profile-pic {
      width: 44px; height: 44px;
      border-radius: 50%;
      background: var(--gold);
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      color: var(--navy);
      font-size: 1.2rem;
      box-shadow: 0 2px 8px rgba(26,31,54,0.12);
      outline: none;
    }
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 24px;
      margin-bottom: 32px;
    }
    .stat-card {
      background: var(--navy);
      color: var(--gold);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 24px;
      text-align: center;
      font-weight: 600;
      font-size: 1.1rem;
      position: relative;
      transition: box-shadow var(--transition);
    }
    .stat-card .count {
      font-size: 2.3rem;
      font-weight: 700;
      color: var(--gold);
      margin-bottom: 8px;
      display: block;
      animation: counter 1.2s ease;
    }
    @keyframes counter {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    section {
      background: var(--white);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 24px;
      margin-bottom: 32px;
    }
    section h2 {
      color: var(--navy);
      font-size: 1.2rem;
      font-weight: 700;
      margin-bottom: 18px;
    }
    .table {
      width: 100%;
      border-collapse: collapse;
      background: none;
      margin-bottom: 18px;
    }
    .table th, .table td {
      padding: 12px 10px;
      border-bottom: 1px solid #eee;
      text-align: left;
      font-size: 1rem;
    }
    .table th {
      color: var(--gold);
      background: var(--navy);
      font-weight: 700;
    }
    .table tr:hover {
      background: #f7f7f7;
    }
    .list {
      list-style: none;
      padding: 0;
      margin: 0;
    }
    .list li {
      padding: 10px 0;
      border-bottom: 1px solid #eee;
      color: var(--navy);
    }
    .gold {
      color: var(--gold);
    }
    .btn {
      background: var(--gold);
      color: var(--navy);
      border: none;
      border-radius: 10px;
      padding: 10px 22px;
      font-weight: 600;
      cursor: pointer;
      margin-right: 8px;
      margin-bottom: 8px;
      transition: background var(--transition), color var(--transition);
      outline: none;
    }
    .btn:focus, .btn:hover {
      background: #e6c200;
      color: var(--white);
    }
    @media (max-width: 900px) {
      nav[aria-label="Sidebar"] { left: -260px; }
      .sidebar-toggle { display: flex; }
      main { margin-left: 0; }
    }
    @media (max-width: 600px) {
      main { padding: 12px; }
      header[aria-label="Topbar"] { padding: 12px; }
      section { padding: 12px; }
    }
    footer {
      text-align: center;
      color: var(--gold);
      background: var(--navy);
      padding: 16px 0;
      font-size: 0.95rem;
      border-top: 1px solid #222;
      margin-top: auto;
    }
  </style>
</head>
<body>
  <nav aria-label="Sidebar" id="sidebar">
    <div class="logo">RUDASUMBWA</div>
    <ul class="sidebar-list">
      <li><a href="#" class="active" onclick="showSection('dashboard')" tabindex="1">Dashboard</a></li>
      <li><a href="#" onclick="showSection('classes')" tabindex="2">My Classes</a></li>
  <li><a href="quiz.html" tabindex="3">Create Quiz</a></li>
      <li><a href="#" onclick="showSection('manage-quizzes')" tabindex="4">Manage Quizzes</a></li>
      <li><a href="#" onclick="showSection('quiz-results')" tabindex="5">View Quiz Results</a></li>
      <li><a href="#" onclick="showSection('leaderboard')" tabindex="6">Leaderboard</a></li>
      <li><a href="#" onclick="showSection('clubs')" tabindex="7">Clubs</a></li>
      <li><a href="#" onclick="showSection('messages')" tabindex="8">Messages / Notifications</a></li>
  <li><a href="teacher-notes.html" tabindex="9">Create Notes</a></li>
  <!-- Logout removed from sidebar -->
    </ul>
    <button class="sidebar-toggle" id="sidebar-toggle" aria-label="Toggle Sidebar" onclick="toggleSidebar()">â˜°</button>
  </nav>
  <main id="main">
    <header aria-label="Topbar">
      <div class="welcome">Welcome, <span class="gold">Mr. Teacher</span></div>
      <div class="profile">
        <div class="profile-pic" tabindex="0" aria-label="Profile Picture" onclick="toggleProfileDropdown()">T</div>
        <div id="profile-dropdown" style="display:none;position:absolute;top:60px;right:32px;background:var(--white);color:var(--navy);border-radius:12px;box-shadow:0 2px 16px #ffd700;min-width:180px;z-index:200;">
          <a href="#" onclick="showSection('profile');hideSidebar();" style="display:block;padding:14px 24px;text-decoration:none;color:var(--navy);border-bottom:1px solid #eee;">My Profile</a>
          <a href="#" onclick="logout()" style="display:block;padding:14px 24px;text-decoration:none;color:var(--navy);">Logout</a>
        </div>
      </div>
    </header>
    <!-- Dashboard Section -->
    <section id="dashboard-section">
      <div class="stats-grid" role="region" aria-label="Quick Stats" id="dashboard-stats">
        <!-- Stats will be loaded dynamically -->
      </div>
      <section aria-label="Dashboard Details">
        <h2>Upcoming Quizzes</h2>
        <table class="table" aria-label="Upcoming Quizzes" id="upcoming-quizzes-table">
          <thead><tr><th>Title</th><th>Class</th><th>Date</th></tr></thead>
          <tbody>
            <!-- Quizzes will be loaded dynamically -->
          </tbody>
        </table>
        <h2>Recent Quiz Results</h2>
        <table class="table" aria-label="Recent Quiz Results" id="recent-quiz-results-table">
          <thead><tr><th>Quiz</th><th>Class</th><th>Avg. Score</th></tr></thead>
          <tbody>
            <!-- Results will be loaded dynamically -->
          </tbody>
        </table>
        <h2>Latest Club Updates</h2>
        <ul class="list" aria-label="Latest Club Updates" id="latest-club-updates">
          <!-- Club updates will be loaded dynamically -->
        </ul>
        <h2>Recent Announcements</h2>
        <ul class="list" aria-label="Recent Announcements" id="recent-announcements">
          <!-- Announcements will be loaded dynamically -->
        </ul>
      </section>
    </section>
  <!-- ...existing code... -->
    <!-- Manage Quizzes Section -->
    <section id="manage-quizzes-section" style="display:none;">
      <h2>Manage Quizzes</h2>
      <table class="table" aria-label="Manage Quizzes" id="manage-quizzes-table">
        <thead><tr><th>Quiz</th><th>Actions</th></tr></thead>
        <tbody>
          <!-- Quizzes will be loaded dynamically -->
        </tbody>
      </table>
    </section>
    <!-- View Quiz Results Section -->
    <section id="quiz-results-section" style="display:none;">
      <h2>View Quiz Results</h2>
      <input type="text" placeholder="Search by Student or Class" style="width:100%;margin-bottom:12px;" aria-label="Search by Student or Class" id="quiz-results-search" />
      <table class="table" aria-label="Quiz Results" id="quiz-results-table">
        <thead><tr><th>Student</th><th>Quiz</th><th>Score</th><th>Export</th></tr></thead>
        <tbody>
          <!-- Results will be loaded dynamically -->
        </tbody>
      </table>
    </section>
    <!-- Leaderboard Section -->
    <section id="leaderboard-section" style="display:none;">
      <h2>Leaderboard</h2>
      <table class="table" aria-label="Leaderboard" id="leaderboard-table">
        <thead><tr><th>Rank</th><th>Class</th><th>Student</th><th>Badge</th></tr></thead>
        <tbody>
          <!-- Leaderboard will be loaded dynamically -->
        </tbody>
      </table>
    </section>
    <!-- Clubs Section -->
    <section id="clubs-section" style="display:none;">
      <h2>Clubs</h2>
      <table class="table" aria-label="Clubs" id="clubs-table">
        <thead><tr><th>Club</th><th>Actions</th></tr></thead>
        <tbody>
          <!-- Clubs will be loaded dynamically -->
        </tbody>
      </table>
      <button class="btn" id="create-club-btn">Create New Club</button>
    </section>
    <!-- Messages / Notifications Section -->
    <section id="messages-section" style="display:none;">
      <h2>Messages / Notifications</h2>
      <button class="btn" id="new-message-btn">New Message</button>
      <button class="btn" id="send-message-class-btn">Send Message to Class</button>
      <ul class="list" aria-label="Messages and Notifications" id="messages-list">
        <!-- Messages will be loaded dynamically -->
      </ul>
    </section>
    <!-- Help & Support Section -->
    <section id="help-section" style="display:none;">
      <h2>Help & Support</h2>
      <ul class="list" aria-label="Help and Support" id="help-list">
        <!-- Help/support info will be loaded dynamically -->
      </ul>
    </section>
  </main>
  <footer>
    &copy; 2025 RUDASUMBWA School. All rights reserved.
  </footer>
  <script>
    // Sidebar navigation
    function showSection(section) {
      const sections = [
        'dashboard','profile','classes','create-quiz','manage-quizzes','quiz-results','leaderboard','clubs','messages','help'
      ];
      sections.forEach(s => {
        document.getElementById(s+'-section').style.display = 'none';
      });
      document.getElementById(section+'-section').style.display = '';
      Array.from(document.querySelectorAll('.sidebar-list a')).forEach(a=>a.classList.remove('active'));
      Array.from(document.querySelectorAll('.sidebar-list a')).find(a=>a.textContent.replace(/\s/g,'').toLowerCase().includes(section.replace('-',''))).classList.add('active');
    }
    // Profile dropdown
    function toggleProfileDropdown() {
      const dropdown = document.getElementById('profile-dropdown');
      dropdown.style.display = dropdown.style.display === 'block' ? 'none' : 'block';
    }
    window.onclick = function(e) {
      if (!e.target.matches('.profile-pic')) {
        document.getElementById('profile-dropdown').style.display = 'none';
      }
    }
    // Hide sidebar for immersive dashboard card click
    function hideSidebar() {
      const sidebar = document.getElementById('sidebar');
      sidebar.style.left = '-260px';
    }
    // Hide sidebar when clicking a stat card in dashboard
    document.addEventListener('DOMContentLoaded', function() {
      Array.from(document.querySelectorAll('.stat-card')).forEach(card => {
        card.addEventListener('click', function() {
          hideSidebar();
        });
      });
    });
    // Sidebar mobile toggle
    function toggleSidebar() {
      const sidebar = document.getElementById('sidebar');
      if (window.innerWidth < 900) {
        if (sidebar.style.left === '0px' || sidebar.style.left === '') {
          sidebar.style.left = '-260px';
        } else {
          sidebar.style.left = '0px';
        }
      }
    }
    window.addEventListener('resize', function() {
      const sidebar = document.getElementById('sidebar');
      if (window.innerWidth >= 900) {
        sidebar.style.left = '0px';
      } else {
        sidebar.style.left = '-260px';
      }
    });
    // Logout
    function logout() {
      if (confirm('Are you sure you want to logout?')) {
        window.location.href = 'login.html';
      }
    }
    // Add question (demo only)
    function addQuestion() {
      alert('Add question functionality coming soon!');
    }
    // Fetch and display dashboard stats
    async function loadDashboardStats() {
      const res = await fetch('/api/dashboard');
      const data = await res.json();
      const statsGrid = document.getElementById('dashboard-stats');
      statsGrid.innerHTML = `
        <div class="stat-card"><span class="count">${data.quizzesCreated}</span>Quizzes Created</div>
        <div class="stat-card"><span class="count">${data.classesManaged}</span>Classes Managed</div>
        <div class="stat-card"><span class="count">${data.studentsEnrolled}</span>Students Enrolled</div>
        <div class="stat-card"><span class="count">${data.eventsOrganized}</span>Events Organized</div>
      `;
    }

    // Fetch and display upcoming quizzes
    async function loadUpcomingQuizzes() {
      const res = await fetch('/api/quizzes');
      const data = await res.json();
      const tbody = document.querySelector('#upcoming-quizzes-table tbody');
      tbody.innerHTML = data.quizzes.map(q => `<tr><td>${q.title}</td><td>${q.class}</td><td>${q.date}</td></tr>`).join('');
    }

    // Fetch and display recent quiz results
    async function loadRecentQuizResults() {
      const res = await fetch('/api/quizzes/results');
      const data = await res.json();
      const tbody = document.querySelector('#recent-quiz-results-table tbody');
      tbody.innerHTML = data.results.map(r => `<tr><td>${r.quiz}</td><td>${r.class}</td><td>${r.avgScore}%</td></tr>`).join('');
    }

    // Fetch and display club updates
    async function loadClubUpdates() {
      const res = await fetch('/api/clubs');
      const data = await res.json();
      const ul = document.getElementById('latest-club-updates');
      ul.innerHTML = data.clubs.map(c => `<li>${c.name}: ${c.update}</li>`).join('');
    }

    // Fetch and display announcements
    async function loadAnnouncements() {
      const res = await fetch('/api/announcements');
      const data = await res.json();
      const ul = document.getElementById('recent-announcements');
      ul.innerHTML = data.announcements.map(a => `<li>${a.text}</li>`).join('');
    }

    // Fetch and display profile info
    async function loadProfile() {
      const res = await fetch('/api/users/profile');
      const data = await res.json();
      const info = document.getElementById('profile-info');
      info.innerHTML = `
        <div><b>Full Name:</b> ${data.user.name}</div>
        <div><b>Email:</b> ${data.user.email}</div>
        <div><b>Subjects Taught:</b> ${data.user.subjects}</div>
        <div><b>Parish:</b> ${data.user.parish}</div>
        <div><b>Classes Assigned:</b> ${data.user.classes}</div>
      `;
    }

    // Fetch and display classes
    async function loadClasses() {
      const res = await fetch('/api/classes');
      const data = await res.json();
      const tbody = document.querySelector('#classes-table tbody');
      tbody.innerHTML = data.classes.map(c => `<tr><td>${c.name}</td><td><button class="btn" onclick="viewStudents('${c.id}')">View Students</button><button class="btn" onclick="postAnnouncement('${c.id}')">Post Announcement</button><button class="btn" onclick="uploadResources('${c.id}')">Upload Resources</button><button class="btn" onclick="classDiscussions('${c.id}')">Class Discussions</button></td></tr>`).join('');
    }

    // Fetch and display quizzes for management
    async function loadManageQuizzes() {
      const res = await fetch('/api/quizzes');
      const data = await res.json();
      const tbody = document.querySelector('#manage-quizzes-table tbody');
      tbody.innerHTML = data.quizzes.map(q => `<tr><td>${q.title}</td><td><button class="btn" onclick="editQuiz('${q.id}')">Edit</button><button class="btn" onclick="deleteQuiz('${q.id}')">Delete</button><button class="btn" onclick="viewAttempts('${q.id}')">View Attempts</button></td></tr>`).join('');
    }

    // Fetch and display quiz results
    async function loadQuizResults() {
      const res = await fetch('/api/quizzes/results');
      const data = await res.json();
      const tbody = document.querySelector('#quiz-results-table tbody');
      tbody.innerHTML = data.results.map(r => `<tr><td>${r.student}</td><td>${r.quiz}</td><td>${r.score}%</td><td><button class="btn" onclick="exportResult('${r.id}')">Export</button></td></tr>`).join('');
    }

    // Fetch and display leaderboard
    async function loadLeaderboard() {
      const res = await fetch('/api/leaderboard');
      const data = await res.json();
      const tbody = document.querySelector('#leaderboard-table tbody');
      tbody.innerHTML = data.leaderboard.map((l, i) => `<tr><td>${i+1}</td><td>${l.class}</td><td>${l.name}</td><td><span class="gold">${l.badge}</span></td></tr>`).join('');
    }

    // Fetch and display clubs
    async function loadClubs() {
      const res = await fetch('/api/clubs');
      const data = await res.json();
      const tbody = document.querySelector('#clubs-table tbody');
      tbody.innerHTML = data.clubs.map(c => `<tr><td>${c.name}</td><td><button class="btn" onclick="approveMembership('${c.id}')">Approve Memberships</button><button class="btn" onclick="postClubNews('${c.id}')">Post News</button></td></tr>`).join('');
    }

    // Fetch and display messages
    async function loadMessages() {
      const res = await fetch('/api/messages');
      const data = await res.json();
      const ul = document.getElementById('messages-list');
      ul.innerHTML = data.messages.map(m => `<li>${m.text}</li>`).join('');
    }

    // Fetch and display help/support info
    async function loadHelp() {
      const res = await fetch('/api/help');
      const data = await res.json();
      const ul = document.getElementById('help-list');
      ul.innerHTML = data.help.map(h => `<li>${h.text}</li>`).join('');
    }

    // Load all dashboard features when dashboard section is shown
    async function loadDashboardFeatures() {
      await Promise.all([
        loadDashboardStats(),
        loadUpcomingQuizzes(),
        loadRecentQuizResults(),
        loadClubUpdates(),
        loadAnnouncements()
      ]);
    }

    // Section loader
    function showSection(section) {
      const sections = [
        'dashboard','profile','classes','create-quiz','manage-quizzes','quiz-results','leaderboard','clubs','messages','help'
      ];
      sections.forEach(s => {
        document.getElementById(s+'-section').style.display = 'none';
      });
      document.getElementById(section+'-section').style.display = '';
      Array.from(document.querySelectorAll('.sidebar-list a')).forEach(a=>a.classList.remove('active'));
      Array.from(document.querySelectorAll('.sidebar-list a')).find(a=>a.textContent.replace(/\s/g,'').toLowerCase().includes(section.replace('-',''))).classList.add('active');
      // Load data for each section
      if (section === 'dashboard') loadDashboardFeatures();
      if (section === 'profile') loadProfile();
      if (section === 'classes') loadClasses();
      if (section === 'manage-quizzes') loadManageQuizzes();
      if (section === 'quiz-results') loadQuizResults();
      if (section === 'leaderboard') loadLeaderboard();
      if (section === 'clubs') loadClubs();
      if (section === 'messages') loadMessages();
      if (section === 'help') loadHelp();
    }

    // Initial load
    document.addEventListener('DOMContentLoaded', function() {
      showSection('dashboard');
    });
  </script>
</body>
</html>
